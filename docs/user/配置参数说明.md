# 问卷星自动化系统 - 配置参数说明

## 系统配置参数

### 1. 基础配置
- **url**: 问卷链接地址
- **target_num**: 目标填写数量
- **weixin_ratio**: 微信比例设置
- **delay_min**: 最小延迟时间（秒）
- **delay_max**: 最大延迟时间（秒）

### 2. 题型配置参数

#### 2.1 单选题配置 (single_prob)
- **格式**: `{"题号": 概率值}`
- **概率值**: 
  - `-1`: 随机选择
  - `[p1, p2, p3, ...]`: 各选项的概率列表
- **示例**: `{"1": [0.3, 0.4, 0.3], "2": -1}`

#### 2.2 多选题配置 (multiple_prob)
- **格式**: `{"题号": {"prob": [概率列表], "min_selection": 最少选择数, "max_selection": 最多选择数}}`
- **示例**: `{"3": {"prob": [0.2, 0.3, 0.3, 0.2], "min_selection": 1, "max_selection": 3}}`

#### 2.3 矩阵题配置 (matrix_prob)
- **格式**: `{"题号": {"rows": 行数, "cols": 列数, "row_probs": [[行1概率], [行2概率], ...]}}`
- **示例**: `{"4": {"rows": 3, "cols": 5, "row_probs": [[0.2, 0.2, 0.2, 0.2, 0.2], [0.3, 0.2, 0.2, 0.2, 0.1], [0.1, 0.2, 0.4, 0.2, 0.1]]}}`

#### 2.4 量表题配置 (scale_prob)
- **格式**: `{"题号": [概率列表]}`
- **示例**: `{"5": [0.1, 0.2, 0.4, 0.2, 0.1]}`

#### 2.5 填空题配置 (texts)
- **格式**: `{"题号": ["答案1", "答案2", "答案3", ...]}`
- **示例**: `{"6": ["很好", "不错", "一般", "较差"]}`

#### 2.6 多项填空配置 (multiple_texts)
- **格式**: `{"题号": [["空1答案1", "空1答案2"], ["空2答案1", "空2答案2"], ...]}`
- **示例**: `{"7": [["姓名1", "姓名2"], ["年龄1", "年龄2"]]}`

#### 2.7 下拉框配置 (droplist_prob)
- **格式**: `{"题号": [概率列表]}`
- **示例**: `{"8": [0.2, 0.3, 0.3, 0.2]}`

#### 2.8 排序题配置 (reorder_prob)
- **格式**: `{"题号": [概率列表]}`
- **示例**: `{"9": [0.25, 0.25, 0.25, 0.25]}`

### 3. 矩阵数据结构 (matrix_data)
- **格式**: `{"题号": {"rows": [行标题列表], "cols": [列标题列表]}}`
- **示例**: 
```json
{
  "4": {
    "rows": ["问题1", "问题2", "问题3"],
    "cols": ["非常同意", "同意", "一般", "不同意", "非常不同意"]
  }
}
```

### 4. 跳转规则配置 (jump_rules)
- **格式**: `{"题号": {"选项索引": "跳转题号"}}`
- **示例**: `{"1": {"0": "3", "1": "5"}}`

## 配置方法

### 1. 通过界面配置
1. 启动系统后，点击"解析问卷"
2. 在"题型设置"标签页中配置各题目的参数
3. 使用快捷按钮（随机、平均、偏左、偏右）快速设置
4. 点击"保存配置"保存设置

### 2. 手动编辑配置文件
配置文件位置：`config.json`
```json
{
  "url": "https://www.wjx.cn/vm/xxx.aspx",
  "target_num": 100,
  "weixin_ratio": 0.5,
  "delay_min": 1,
  "delay_max": 3,
  "single_prob": {
    "1": [0.3, 0.4, 0.3]
  },
  "matrix_prob": {
    "2": {
      "rows": 3,
      "cols": 5,
      "row_probs": [[0.2, 0.2, 0.2, 0.2, 0.2], [0.3, 0.2, 0.2, 0.2, 0.1], [0.1, 0.2, 0.4, 0.2, 0.1]]
    }
  }
}
```

## 快捷配置说明

### 1. 随机配置
- **作用**: 所有选项概率相等
- **适用**: 单选题、多选题、量表题、下拉框、排序题

### 2. 平均配置
- **作用**: 选项概率均匀分布
- **适用**: 单选题、多选题、量表题、下拉框、排序题

### 3. 偏左配置
- **作用**: 偏向选择左侧选项
- **适用**: 单选题、多选题、量表题、下拉框、排序题

### 4. 偏右配置
- **作用**: 偏向选择右侧选项
- **适用**: 单选题、多选题、量表题、下拉框、排序题

### 5. 矩阵复杂配置
- **作用**: 为矩阵题的每一行设置不同的概率分布
- **适用**: 矩阵题

## 注意事项

1. **概率归一化**: 系统会自动将概率列表归一化，确保总和为1
2. **默认配置**: 如果某题目没有配置，系统会使用默认的随机配置
3. **配置验证**: 系统会验证配置的有效性，无效配置会被忽略
4. **配置保存**: 配置会自动保存到本地文件，下次启动时会自动加载
5. **配置重置**: 可以通过"重置默认"按钮恢复默认配置

## 高级配置

### 1. 条件跳转
```json
{
  "jump_rules": {
    "1": {"0": "3", "1": "5"},
    "3": {"0": "6", "1": "7"}
  }
}
```

### 2. 多路径配置
```json
{
  "page_paths": [
    {
      "page": 1,
      "path": [0],
      "questions": ["1", "2", "3"]
    },
    {
      "page": 2,
      "path": [0, 1],
      "questions": ["4", "5", "6"]
    }
  ]
}
```

### 3. AI配置
```json
{
  "ai_enabled": true,
  "ai_service": "openai",
  "ai_api_key": "your_api_key",
  "ai_prompt_template": "请根据以下问题生成合适的答案：{question}"
}
```

这些配置参数可以让系统根据不同的需求进行精确的问卷填写控制。
